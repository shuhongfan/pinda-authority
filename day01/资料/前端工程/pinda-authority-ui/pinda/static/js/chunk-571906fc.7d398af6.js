(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-571906fc","chunk-66d6ed30"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,a){var o=n(),r=t-o,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var n=Math.easeInOutQuad(c,o,r,e);s(n),c<e?i(t):a&&"function"===typeof a&&a()};u()}},"2d64":function(t,e,a){"use strict";var i=a("db72"),s=a("9256"),n={page:{url:"/authority/station/page",method:"GET"},save:{url:"/authority/station",method:"POST"},update:{url:"/authority/station",method:"PUT"},delete:{url:"/authority/station",method:"DELETE"}};e["a"]={page:function(t){return Object(s["a"])(Object(i["a"])({},n.page,{formData:!0,data:t}))},save:function(t){return Object(s["a"])(Object(i["a"])({},n.save,{data:t}))},update:function(t){return Object(s["a"])(Object(i["a"])({},n.update,{data:t}))},delete:function(t){return Object(s["a"])(Object(i["a"])({},n.delete,{data:t}))}}},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),s=a("d8e8"),n=a("4bf8"),o=a("79e5"),r=[].sort,l=[1,2,3];i(i.P+i.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),s(t))}})},"74e9":function(t,e,a){"use strict";var i=a("e80f"),s=a.n(i);s.a},"8de1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("label",{staticStyle:{color:"#909399","font-weight":"500"}},[t._v("岗位名称：")]),t._v(" "),a("el-input",{staticClass:"filter-item search-item",attrs:{placeholder:t.$t("table.station.name")},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}}),t._v(" "),a("label",{staticStyle:{color:"#909399","font-weight":"500"}},[t._v("组织：")]),t._v(" "),a("treeselect",{staticClass:"filter-item search-item",attrs:{"clear-value-text":t.$t("common.clear"),"load-options":t.loadListOptions,multiple:!1,options:t.orgList,placeholder:t.$t("table.station.orgId"),searchable:!0},model:{value:t.queryParams.orgId,callback:function(e){t.$set(t.queryParams,"orgId",e)},expression:"queryParams.orgId"}}),t._v(" "),a("label",{staticStyle:{color:"#909399","font-weight":"500"}},[t._v("日期：")]),t._v(" "),a("el-date-picker",{staticClass:"filter-item search-item date-range-item",attrs:{"range-separator":null,"end-placeholder":"结束日期",format:"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.queryParams.timeRange,callback:function(e){t.$set(t.queryParams,"timeRange",e)},expression:"queryParams.timeRange"}}),t._v(" "),a("el-button",{staticStyle:{"background-color":"#E05635",color:"#fff","border-radius":"5px","border-color":"#DCDFE6"},on:{click:t.search}},[t._v(t._s(t.$t("table.search")))]),t._v(" "),a("el-button",{staticStyle:{"background-color":"#fff",color:"#606266","border-radius":"5px","border-color":"#DCDFE6"},on:{click:t.reset}},[t._v(t._s(t.$t("table.reset")))]),t._v(" "),a("el-dropdown",{directives:[{name:"has-any-permission",rawName:"v-has-any-permission",value:["station:add","station:delete","station:export"],expression:"['station:add','station:delete','station:export']"}],staticClass:"filter-item",attrs:{trigger:"click"}},[a("el-button",{staticStyle:{height:"40px","margin-top":"6px","background-color":"#fff",color:"#606266","border-color":"#DCDFE6"}},[t._v("\n        "+t._s(t.$t("table.more"))+"\n        "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["station:add"],expression:"['station:add']"}],nativeOn:{click:function(e){return t.add(e)}}},[t._v(t._s(t.$t("table.add")))]),t._v(" "),a("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["station:delete"],expression:"['station:delete']"}],nativeOn:{click:function(e){return t.batchDelete(e)}}},[t._v(t._s(t.$t("table.delete")))]),t._v(" "),a("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["station:export"],expression:"['station:export']"}],nativeOn:{click:function(e){return t.exportExcel(e)}}},[t._v(t._s(t.$t("table.export")))])],1)],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:t.tableKey,ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData.records,"header-cell-style":{background:"#FCFBFF",border:"0"},fit:""},on:{"selection-change":t.onSelectChange,"sort-change":t.sortChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"40px"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.station.name"),"show-overflow-tooltip":!0,align:"center",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.station.describe"),"show-overflow-tooltip":!0,align:"center",prop:"describe"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.describe))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.station.orgId"),align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.orgId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"filter-method":t.filterStatus,filters:[{text:t.$t("common.status.valid"),value:!0},{text:t.$t("common.status.invalid"),value:!1}],label:t.$t("table.station.status"),"class-name":"status-col",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tag",{attrs:{type:t._f("statusFilter")(i.status)}},[t._v(t._s(i.status?t.$t("common.status.valid"):t.$t("common.status.invalid")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.createTime"),align:"center",prop:"createTime",sortable:"custom",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.createTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.operation"),align:"center","class-name":"small-padding fixed-width",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("i",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:["user:update"],expression:"['user:update']"}],staticStyle:{color:"#009EFF"},on:{click:function(e){return t.edit(i)}}},[t._v("修改")]),t._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),a("i",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:["user:delete"],expression:"['user:delete']"}],staticStyle:{color:"#E05635"},on:{click:function(e){return t.singleDelete(i)}}},[t._v("删除")]),t._v(" "),a("el-link",{directives:[{name:"has-no-permission",rawName:"v-has-no-permission",value:["station:update","station:delete"],expression:"['station:update','station:delete']"}],staticClass:"no-perm"},[t._v(t._s(t.$t("tips.noPermission")))])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.tableData.total>0,expression:"tableData.total>0"}],attrs:{limit:t.pagination.size,page:t.pagination.current,total:Number(t.tableData.total)},on:{"update:limit":function(e){return t.$set(t.pagination,"size",e)},"update:page":function(e){return t.$set(t.pagination,"current",e)},pagination:t.fetch}}),t._v(" "),a("station-edit",{ref:"edit",attrs:{"dialog-visible":t.dialog.isVisible,type:t.dialog.type},on:{close:t.editClose,success:t.editSuccess}})],1)],1)},s=[],n=(a("ac6a"),a("55dd"),a("db72")),o=(a("386d"),a("7026")),r=a.n(o),l=(a("542c"),a("333d")),c=a("ff09"),u=a("2d64"),d=a("c38b"),m={name:"StationManage",components:{Pagination:l["a"],StationEdit:c["default"],Treeselect:r.a},filters:{statusFilter:function(t){var e={false:"danger",true:"success"};return e[t]||"success"}},data:function(){return{dialog:{isVisible:!1,type:"add"},tableKey:0,orgList:[],queryParams:{},sort:{},selection:[],loading:!1,tableData:{total:0},pagination:{size:10,current:1}}},computed:{},watch:{$route:function(){"/user/station"===this.$route.path&&this.initOrg()}},mounted:function(){this.initOrg(),this.fetch()},methods:{initOrg:function(){var t=this;d["a"].allTree({status:!0}).then((function(e){var a=e.data;t.orgList=a.data})).catch((function(){t.$message({message:t.$t("tips.getDataFail"),type:"error"})}))},loadListOptions:function(t){var e=t.callback;e()},filterStatus:function(t,e){return e.status===t},editClose:function(){this.dialog.isVisible=!1},editSuccess:function(){this.search()},onSelectChange:function(t){this.selection=t},search:function(){this.fetch(Object(n["a"])({},this.queryParams,{},this.sort))},reset:function(){this.queryParams={},this.sort={},this.$refs.table.clearSort(),this.$refs.table.clearFilter(),this.search()},exportExcel:function(){this.$message({message:"待完善",type:"warning"})},singleDelete:function(t){this.$refs.table.toggleRowSelection(t,!0),this.batchDelete()},batchDelete:function(){var t=this;this.selection.length?this.$confirm(this.$t("tips.confirmDelete"),this.$t("common.tips"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){var e=[];t.selection.forEach((function(t){e.push(t.id)})),t.delete(e)})).catch((function(){t.clearSelections()})):this.$message({message:this.$t("tips.noDataSelected"),type:"warning"})},clearSelections:function(){this.$refs.table.clearSelection()},delete:function(t){var e=this;u["a"].delete({ids:t}).then((function(t){var a=t.data;a.isSuccess&&e.$message({message:e.$t("tips.deleteSuccess"),type:"success"}),e.search()}))},add:function(){this.dialog.type="add",this.dialog.isVisible=!0,this.$refs.edit.setStation(!1,this.orgList)},edit:function(t){this.$refs.edit.setStation(t,this.orgList),this.dialog.type="edit",this.dialog.isVisible=!0},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,e.size=this.pagination.size,e.current=this.pagination.current,this.queryParams.timeRange&&(e.startCreateTime=this.queryParams.timeRange[0],e.endCreateTime=this.queryParams.timeRange[1]),u["a"].page(e).then((function(e){var a=e.data;t.loading=!1,a.isError||(t.tableData=a.data)}))},sortChange:function(t){this.sort.field=t.prop,this.sort.order=t.order,this.search()}}},f=m,p=(a("74e9"),a("2877")),h=Object(p["a"])(f,i,s,!1,null,null,null);e["default"]=h.exports},c38b:function(t,e,a){"use strict";var i=a("db72"),s=a("9256"),n={allTree:{method:"GET",url:"/authority/org/tree"},save:{method:"POST",url:"/authority/org"},update:{method:"PUT",url:"/authority/org"},delete:{method:"DELETE",url:"/authority/org"}};e["a"]={allTree:function(t){return Object(s["a"])(Object(i["a"])({},n.allTree,{formData:!0,data:t}))},save:function(t){return Object(s["a"])(Object(i["a"])({},n.save,{data:t}))},update:function(t){return Object(s["a"])(Object(i["a"])({},n.update,{data:t}))},delete:function(t){return Object(s["a"])(Object(i["a"])({},n.delete,{data:t}))}}},e80f:function(t,e,a){},ff09:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!0,title:t.title,type:t.type,visible:t.isVisible,width:t.width,top:"50px"},on:{"update:visible":function(e){t.isVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.station,rules:t.rules,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:t.$t("table.station.name"),prop:"name"}},[a("el-input",{model:{value:t.station.name,callback:function(e){t.$set(t.station,"name",e)},expression:"station.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("table.station.orgId"),prop:"orgId"}},[a("treeselect",{staticStyle:{width:"100%"},attrs:{"clear-value-text":t.$t("common.clear"),"load-options":t.loadListOptions,multiple:!1,options:t.orgList,searchable:!0,placeholder:" "},model:{value:t.station.orgId,callback:function(e){t.$set(t.station,"orgId",e)},expression:"station.orgId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("table.station.status"),prop:"status"}},[a("el-radio-group",{model:{value:t.station.status,callback:function(e){t.$set(t.station,"status",e)},expression:"station.status"}},[a("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("common.status.valid")))]),t._v(" "),a("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("common.status.invalid")))])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("table.station.describe"),prop:"describe"}},[a("el-input",{model:{value:t.station.describe,callback:function(e){t.$set(t.station,"describe",e)},expression:"station.describe"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(e){t.isVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),a("el-button",{attrs:{plain:"",type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)},s=[],n=a("db72"),o=a("7026"),r=a.n(o),l=(a("542c"),a("2d64")),c={name:"StationEdit",components:{Treeselect:r.a},props:{dialogVisible:{type:Boolean,default:!1},type:{type:String,default:"add"}},data:function(){var t=this;return{remoteStationLoading:!1,station:this.initStation(),screenWidth:0,width:this.initWidth(),orgList:[],stationList:[],rules:{name:[{required:!0,message:this.$t("rules.require"),trigger:"blur"},{min:1,max:255,message:this.$t("rules.range4to10"),trigger:"blur"},{validator:function(e,a,i){t.station.id,i()},trigger:"blur"}],status:{required:!0,message:this.$t("rules.require"),trigger:"blur"}}}},computed:{isVisible:{get:function(){return this.dialogVisible},set:function(){this.close(),this.reset()}},title:function(){return"add"===this.type?this.$t("common.add"):this.$t("common.edit")}},watch:{},mounted:function(){var t=this;window.onresize=function(){return function(){t.width=t.initWidth()}()}},methods:{initStation:function(){return{id:"",name:"",orgId:null,status:!0,describe:""}},initWidth:function(){return this.screenWidth=document.body.clientWidth,this.screenWidth<991?"90%":this.screenWidth<1400?"45%":"800px"},loadListOptions:function(t){var e=t.callback;e()},setStation:function(t,e){var a=this;a.orgList=e,t&&(a.station=Object(n["a"])({},t))},close:function(){this.$emit("close")},reset:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.station=this.initStation()},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.editSubmit()}))},editSubmit:function(){var t=this;"add"===t.type?t.save():t.update()},save:function(){var t=this;l["a"].save(this.station).then((function(e){var a=e.data;a.isSuccess&&(t.isVisible=!1,t.$message({message:t.$t("tips.createSuccess"),type:"success"}),t.$emit("success"))}))},update:function(){var t=this;l["a"].update(this.station).then((function(e){var a=e.data;a.isSuccess&&(t.isVisible=!1,t.$message({message:t.$t("tips.updateSuccess"),type:"success"}),t.$emit("success"))}))}}},u=c,d=a("2877"),m=Object(d["a"])(u,i,s,!1,null,"96f21de4",null);e["default"]=m.exports}}]);