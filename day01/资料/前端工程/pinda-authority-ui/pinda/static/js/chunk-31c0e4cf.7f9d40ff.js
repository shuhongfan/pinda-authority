(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31c0e4cf"],{"61d9":function(t,e,r){"use strict";var a=r("db72"),i=r("9256"),s={page:{url:"/authority/role/page",method:"GET"},save:{url:"/authority/role",method:"POST"},update:{url:"/authority/role",method:"PUT"},delete:{url:"/authority/role",method:"DELETE"},saveUserRole:{url:"/authority/role/user",method:"POST"},saveRoleAuthority:{url:"/authority/role/authority",method:"POST"}};e["a"]={page:function(t){return Object(i["a"])(Object(a["a"])({},s.page,{formData:!0,data:t}))},save:function(t){return Object(i["a"])(Object(a["a"])({},s.save,{data:t}))},update:function(t){return Object(i["a"])(Object(a["a"])({},s.update,{data:t}))},delete:function(t){return Object(i["a"])(Object(a["a"])({},s.delete,{data:t}))},get:function(t){return Object(i["a"])({url:"/authority/role/".concat(t),method:"GET"})},check:function(t){return Object(i["a"])({url:"/authority/role/check/".concat(t),method:"GET"})},saveUserRole:function(t){return Object(i["a"])(Object(a["a"])({},s.saveUserRole,{data:t}))},findUserIdByRoleId:function(t){return Object(i["a"])({url:"/authority/role/user/".concat(t),method:"GET"})},findAuthorityIdByRoleId:function(t){return Object(i["a"])({url:"/authority/role/authority/".concat(t),method:"GET"})},saveRoleAuthority:function(t){return Object(i["a"])(Object(a["a"])({},s.saveRoleAuthority,{data:t}))}}},"9fb8":function(t,e,r){"use strict";var a=r("db72"),i=r("9256"),s={page:{method:"GET",url:"/authority/user/page"},save:{method:"POST",url:"/authority/user"},update:{method:"PUT",url:"/authority/user"},avatar:{method:"PUT",url:"/authority/user/avatar"},delete:{method:"DELETE",url:"/authority/user"},reset:{method:"GET",url:"/authority/user/reset"},updatePassword:{method:"PUT",url:"/authority/user/password"}};e["a"]={page:function(t){return Object(i["a"])(Object(a["a"])({},s.page,{formData:!0,data:t}))},save:function(t){return Object(i["a"])(Object(a["a"])({},s.save,{data:t}))},update:function(t){return Object(i["a"])(Object(a["a"])({},s.update,{data:t}))},updatePassword:function(t){return Object(i["a"])(Object(a["a"])({},s.updatePassword,{data:t}))},delete:function(t){return Object(i["a"])(Object(a["a"])({},s.delete,{data:t}))},reset:function(t){return Object(i["a"])(Object(a["a"])({},s.reset,{data:t}))},avatar:function(t){return Object(i["a"])(Object(a["a"])({},s.avatar,{data:t}))}}},d81c:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.title,visible:t.isVisible,width:t.width,top:"50px"},on:{"update:visible":function(e){t.isVisible=e}}},[r("el-form",{ref:"form",attrs:{model:t.userRole,rules:t.rules,"label-position":"right","label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户",prop:"userIdList"}},[r("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{data:t.userList,"filter-method":t.filterMethod,props:{key:"id",label:"name"},"render-content":t.renderFunc,"right-default-checked":t.userRole.userIdList,titles:["全部用户","已选用户"],"filter-placeholder":"用户名",filterable:""},model:{value:t.userRole.userIdList,callback:function(e){t.$set(t.userRole,"userIdList",e)},expression:"userRole.userIdList"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(e){t.isVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),r("el-button",{attrs:{disabled:t.disabled,plain:"",type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)},i=[],s=(r("7f7f"),r("61d9")),o=r("9fb8"),n={name:"UserRoleEdit",components:{},props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{userRole:this.initUserRole(),screenWidth:0,width:this.initWidth(),userList:[],userIdList:[],disabled:!1,rules:{},renderFunc:function(t,e){return t("span",{attrs:{title:e.account+" - "+e.name}},[e.account," - ",e.name])}}},computed:{isVisible:{get:function(){return this.dialogVisible},set:function(){this.close(),this.reset()}},title:function(){return"分配角色成员"}},watch:{},mounted:function(){var t=this;this.initUserList(),window.onresize=function(){return function(){t.width=t.initWidth()}()}},methods:{initUserRole:function(){return{roleId:"",userIdList:[]}},initWidth:function(){return this.screenWidth=document.body.clientWidth,this.screenWidth<991?"90%":this.screenWidth<1400?"45%":"800px"},initUserList:function(){var t=this;o["a"].page({current:1,size:1e5,status:!0}).then((function(e){var r=e.data;t.userList=r.data.records})).catch((function(){t.$message({message:t.$t("tips.getDataFail"),type:"error"})}))},setUserRole:function(t){var e=this;e.userRole.roleId=t.id,s["a"].findUserIdByRoleId(t.id).then((function(t){var r=t.data;e.userRole.userIdList=r.data}))},close:function(){this.$emit("close")},reset:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.userRole=this.initUserRole(),this.disabled=!1},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.editSubmit()}))},editSubmit:function(){var t=this;console.log(this.userRole),s["a"].saveUserRole(this.userRole).then((function(e){var r=e.data;r.isSuccess&&(t.isVisible=!1,t.$message({message:t.$t("tips.createSuccess"),type:"success"}),t.$emit("success"))}))},filterMethod:function(t,e){return e.name.indexOf(t)>-1||e.account.indexOf(t)>-1}}},u=n,c=r("2877"),l=Object(c["a"])(u,a,i,!1,null,"028b3b10",null);e["default"]=l.exports}}]);