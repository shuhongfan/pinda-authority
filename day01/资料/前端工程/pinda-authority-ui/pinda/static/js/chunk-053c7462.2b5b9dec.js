(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-053c7462"],{"6b0d":function(e,t,s){"use strict";var i=s("b9ac"),a=s.n(i);a.a},"6db4":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dept"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{xs:24,sm:12}},[s("div",{staticClass:"app-container"},[s("div",{staticClass:"filter-container"},[s("el-input",{staticClass:"filter-item search-item",attrs:{placeholder:e.$t("table.dept.deptName")},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}}),e._v(" "),s("el-button",{staticClass:"filter-item",attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("\n            "+e._s(e.$t("table.search"))+"\n          ")]),e._v(" "),s("el-button",{staticClass:"filter-item",attrs:{type:"warning",plain:""},on:{click:e.reset}},[e._v("\n            "+e._s(e.$t("table.reset"))+"\n          ")]),e._v(" "),s("el-dropdown",{directives:[{name:"has-any-permission",rawName:"v-has-any-permission",value:["dept:add","dept:delete","dept:export"],expression:"['dept:add','dept:delete','dept:export']"}],staticClass:"filter-item",attrs:{trigger:"click"}},[s("el-button",[e._v("\n              "+e._s(e.$t("table.more"))),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["dept:add"],expression:"['dept:add']"}],nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("table.add")))]),e._v(" "),s("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["dept:delete"],expression:"['dept:delete']"}],nativeOn:{click:function(t){return e.deleteDept(t)}}},[e._v(e._s(e.$t("table.delete")))]),e._v(" "),s("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["dept:export"],expression:"['dept:export']"}],nativeOn:{click:function(t){return e.exportExcel(t)}}},[e._v(e._s(e.$t("table.export")))])],1)],1)],1),e._v(" "),s("el-tree",{ref:"deptTree",attrs:{data:e.deptTree,"check-strictly":!0,"show-checkbox":"",accordion:"","node-key":"id","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.nodeClick}})],1)]),e._v(" "),s("el-col",{attrs:{xs:24,sm:12}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(""===e.dept.deptId?this.$t("common.add"):this.$t("common.edit")))])]),e._v(" "),s("div",[s("el-form",{ref:"form",attrs:{model:e.dept,rules:e.rules,"label-position":"right","label-width":"100px"}},[s("el-form-item",{attrs:{label:e.$t("table.dept.parentId"),prop:"parentId"}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("tips.topId"),placement:"top-start"}},[s("el-input",{attrs:{readonly:""},model:{value:e.dept.parentId,callback:function(t){e.$set(e.dept,"parentId",t)},expression:"dept.parentId"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("table.dept.deptName"),prop:"deptName"}},[s("el-input",{attrs:{readonly:""!==e.dept.deptId&&"readonly"},model:{value:e.dept.deptName,callback:function(t){e.$set(e.dept,"deptName",t)},expression:"dept.deptName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("table.dept.orderNum"),prop:"orderNum"}},[s("el-input-number",{attrs:{min:0,max:100},on:{change:e.handleNumChange},model:{value:e.dept.orderNum,callback:function(t){e.$set(e.dept,"orderNum",t)},expression:"dept.orderNum"}})],1)],1)],1)]),e._v(" "),s("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"-2rem"}},[s("el-row",[s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[s("el-button",{attrs:{type:"primary",plain:""},on:{click:e.submit}},[e._v(e._s(""===e.dept.deptId?this.$t("common.add"):this.$t("common.edit")))])],1)],1)],1)],1)],1)],1)},a=[],r=s("db72"),n={name:"DeptManager",data:function(){return{deptName:"",deptTree:[],dept:this.initDept(),rules:{deptName:[{required:!0,message:this.$t("rules.require"),trigger:"blur"},{min:3,max:10,message:this.$t("rules.range3to10"),trigger:"blur"}]}}},mounted:function(){this.initDeptTree()},methods:{initDept:function(){return{deptId:"",deptName:"",parentId:0,orderNum:0}},initDeptTree:function(){var e=this;this.$get("system/dept").then((function(t){e.deptTree=t.data.data.rows}))},exportExcel:function(){this.$download("system/dept/excel",{deptName:this.deptName},"dept_".concat((new Date).getTime(),".xlsx"))},handleNumChange:function(e){this.dept.orderNum=e},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},nodeClick:function(e){this.dept=Object(r["a"])({},e),this.dept.deptName=this.dept.label,this.dept.deptId=this.dept.id,this.$refs.form.clearValidate()},add:function(){this.resetForm();var e=this.$refs.deptTree.getCheckedKeys();e.length>1?this.$message({message:this.$t("tips.onlyChooseOne"),type:"warning"}):e.length>0?this.dept.parentId=e[0]:this.dept.parentId=0},deleteDept:function(){var e=this,t=this.$refs.deptTree.getCheckedKeys();0===t.length?this.$message({message:this.$t("tips.noNodeSelected"),type:"warning"}):this.$confirm(this.$t("tips.confirmDeleteNode"),this.$t("common.tips"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){e.dept.deptIds=t.join(","),e.$delete("system/dept/".concat(e.dept.deptIds)).then((function(){e.$message({message:e.$t("tips.deleteSuccess"),type:"success"}),e.reset()}))})).catch((function(){e.$refs.deptTree.setCheckedKeys([])}))},search:function(){this.$refs.deptTree.filter(this.deptName)},reset:function(){this.initDeptTree(),this.deptName="",this.resetForm()},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.dept.createTime=e.dept.modifyTime=null,e.dept.deptId?e.$put("system/dept",Object(r["a"])({},e.dept)).then((function(){e.$message({message:e.$t("tips.updateSuccess"),type:"success"}),e.reset()})):e.$post("system/dept",Object(r["a"])({},e.dept)).then((function(){e.$message({message:e.$t("tips.createSuccess"),type:"success"}),e.reset()}))}))},resetForm:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.dept=this.initDept()}}},d=n,o=(s("6b0d"),s("2877")),p=Object(o["a"])(d,i,a,!1,null,"22f433cd",null);t["default"]=p.exports},b9ac:function(e,t,s){}}]);