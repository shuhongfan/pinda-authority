(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3213e5aa"],{"807d":function(e,t,r){},"82be":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"org"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:8,xs:10}},[r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item search-item",attrs:{placeholder:e.$t("table.org.name"),clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("el-button",{staticStyle:{"background-color":"#E05635",color:"#fff","border-radius":"5px","border-color":"#DCDFE6"},on:{click:e.search}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),r("el-button",{staticStyle:{"background-color":"#fff",color:"#606266","border-radius":"5px","border-color":"#DCDFE6"},on:{click:e.reset}},[e._v(e._s(e.$t("table.reset")))]),e._v(" "),r("el-dropdown",{directives:[{name:"has-any-permission",rawName:"v-has-any-permission",value:["org:add","org:delete","org:export"],expression:"['org:add','org:delete','org:export']"}],attrs:{trigger:"click"}},[r("el-button",{staticStyle:{height:"40px","margin-top":"6px","background-color":"#fff",color:"#606266","border-color":"#DCDFE6"}},[e._v("\n              "+e._s(e.$t("table.more"))+"\n              "),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["org:add"],expression:"['org:add']"}],nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("table.add")))]),e._v(" "),r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["org:delete"],expression:"['org:delete']"}],nativeOn:{click:function(t){return e.deleteOrg(t)}}},[e._v(e._s(e.$t("table.delete")))]),e._v(" "),r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["org:export"],expression:"['org:export']"}],nativeOn:{click:function(t){return e.exportExcel(t)}}},[e._v(e._s(e.$t("table.export")))])],1)],1)],1),e._v(" "),r("el-tree",{ref:"orgTree",attrs:{"check-strictly":!0,data:e.orgTree,"filter-node-method":e.filterNode,"default-expand-all":"","highlight-current":"","node-key":"id","show-checkbox":""},on:{"node-click":e.nodeClick}})],1)]),e._v(" "),r("el-col",{attrs:{sm:16,xs:24}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(""===e.org.id?this.$t("common.add"):this.$t("common.edit")))])]),e._v(" "),r("div",[r("el-form",{ref:"form",attrs:{model:e.org,rules:e.rules,"label-position":"right","label-width":"100px"}},[r("el-form-item",{attrs:{label:e.$t("table.org.parentId"),prop:"parentId"}},[r("el-tooltip",{staticClass:"item",attrs:{content:e.$t("tips.topId"),effect:"dark",placement:"top-start"}},[r("el-input",{attrs:{readonly:""},model:{value:e.org.parentId,callback:function(t){e.$set(e.org,"parentId",t)},expression:"org.parentId"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.org.name"),prop:"name"}},[r("el-input",{model:{value:e.org.name,callback:function(t){e.$set(e.org,"name",t)},expression:"org.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.org.abbreviation"),prop:"abbreviation"}},[r("el-input",{model:{value:e.org.abbreviation,callback:function(t){e.$set(e.org,"abbreviation",t)},expression:"org.abbreviation"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.org.describe"),prop:"describe"}},[r("el-input",{model:{value:e.org.describe,callback:function(t){e.$set(e.org,"describe",t)},expression:"org.describe"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.org.status"),prop:"status"}},[r("el-radio-group",{model:{value:e.org.status,callback:function(t){e.$set(e.org,"status",t)},expression:"org.status"}},[r("el-radio",{attrs:{label:!0}},[e._v(e._s(e.$t("common.status.valid")))]),e._v(" "),r("el-radio",{attrs:{label:!1}},[e._v(e._s(e.$t("common.status.invalid")))])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.org.sortValue"),prop:"sortValue"}},[r("el-input-number",{attrs:{max:100,min:0},on:{change:e.handleNumChange},model:{value:e.org.sortValue,callback:function(t){e.$set(e.org,"sortValue",t)},expression:"org.sortValue"}})],1)],1)],1)]),e._v(" "),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"-2rem"}},[r("el-row",[r("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[r("el-button",{staticStyle:{"background-color":"#E05635",color:"#fff"},on:{click:e.submit}},[e._v(e._s(""===e.org.id?this.$t("common.add"):this.$t("common.edit")))])],1)],1)],1)],1)],1)],1)},s=[],o=(r("7f7f"),r("db72")),i=r("c38b"),n={name:"OrgManager",data:function(){return{name:"",orgTree:[],org:this.initOrg(),rules:{name:[{required:!0,message:this.$t("rules.require"),trigger:"blur"},{min:1,max:255,message:this.$t("rules.range3to10"),trigger:"blur"}]}}},mounted:function(){this.initOrgTree()},methods:{initOrg:function(){return{id:"",abbreviation:"",name:"",parentId:0,status:!0,describe:"",sortValue:0}},initOrgTree:function(){var e=this;i["a"].allTree({}).then((function(t){var r=t.data;e.orgTree=r.data}))},exportExcel:function(){this.$message({message:"待完善",type:"warning"})},handleNumChange:function(e){this.org.sortValue=e},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},nodeClick:function(e){this.org=Object(o["a"])({},e),this.$refs.form.clearValidate()},add:function(){this.resetForm();var e=this.$refs.orgTree.getCheckedKeys();e.length>1?this.$message({message:this.$t("tips.onlyChooseOne"),type:"warning"}):e.length>0?this.org.parentId=e[0]:this.org.parentId=0},deleteOrg:function(){var e=this,t=this.$refs.orgTree.getCheckedKeys();0===t.length?this.$message({message:this.$t("tips.noNodeSelected"),type:"warning"}):this.$confirm(this.$t("tips.confirmDeleteNode"),this.$t("common.tips"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){i["a"].delete({ids:t}).then((function(t){var r=t.data;r.isSuccess&&e.$message({message:e.$t("tips.deleteSuccess"),type:"success"}),e.reset()}))})).catch((function(){e.$refs.orgTree.setCheckedKeys([])}))},search:function(){this.$refs.orgTree.filter(this.name)},reset:function(){this.initOrgTree(),this.name="",this.resetForm()},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.org.id?e.update():e.save()}))},save:function(){var e=this;i["a"].save(Object(o["a"])({},this.org)).then((function(t){var r=t.data;r.isSuccess&&e.$message({message:e.$t("tips.createSuccess"),type:"success"}),e.reset()}))},update:function(){var e=this;i["a"].update(Object(o["a"])({},this.org)).then((function(t){var r=t.data;r.isSuccess&&e.$message({message:e.$t("tips.updateSuccess"),type:"success"}),e.reset()}))},resetForm:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.org=this.initOrg()}}},l=n,c=(r("bee6"),r("2877")),d=Object(c["a"])(l,a,s,!1,null,null,null);t["default"]=d.exports},bee6:function(e,t,r){"use strict";var a=r("807d"),s=r.n(a);s.a},c38b:function(e,t,r){"use strict";var a=r("db72"),s=r("9256"),o={allTree:{method:"GET",url:"/authority/org/tree"},save:{method:"POST",url:"/authority/org"},update:{method:"PUT",url:"/authority/org"},delete:{method:"DELETE",url:"/authority/org"}};t["a"]={allTree:function(e){return Object(s["a"])(Object(a["a"])({},o.allTree,{formData:!0,data:e}))},save:function(e){return Object(s["a"])(Object(a["a"])({},o.save,{data:e}))},update:function(e){return Object(s["a"])(Object(a["a"])({},o.update,{data:e}))},delete:function(e){return Object(s["a"])(Object(a["a"])({},o.delete,{data:e}))}}}}]);